<!doctype html><html class="scroll-pt-16 scroll-smooth" lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=icon href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'> <text x='0' y='14'>ğŸ§‘â€ğŸ’»</text> </svg>"><link rel=stylesheet href=https://blog.io01.xyz/css/style.css><script type=text/javascript src=https://blog.io01.xyz/js/main.js></script><title>ä»é˜¿é‡Œè§„çº¦è°ˆèµ· - åŒ…è£…ç±»çš„å€¼æ¯”è¾ƒæ³¨æ„äº‹é¡¹</title></head><body><header class="sticky top-0 z-10 bg-white backdrop-filter backdrop-blur-lg bg-opacity-70 border-b border-gray-200"><nav class="max-w-5xl mx-auto px-4"><div class="flex items-center justify-between h-16"><a href=/ class="text-2xl text-gray-900 font-semibold">IO01 Blog</a><ul class="flex space-x-4 text-gray-900"><li><a href=https://blog.io01.xyz/posts>å½’æ¡£</a></li><li><a href=https://blog.io01.xyz/about>å…³äº</a></li></ul></div></nav></header><div id=content><div class="flex relative justify-center"><article class="w-5/6 md:w-2/3 xl:w-1/2 my-8 px-4 prose max-w-none prose-img:mx-auto"><header class="flex flex-col"><h1 class=text-center>ä»é˜¿é‡Œè§„çº¦è°ˆèµ· - åŒ…è£…ç±»çš„å€¼æ¯”è¾ƒæ³¨æ„äº‹é¡¹</h1><div class="flex-row mx-auto"><div class=inline-flex><div class="inline-flex items-center not-prose"><svg viewBox="0 0 1 1" class="h-4 mr-1"><use href="#calendar"/></svg><span class=text-gray-500>2019-11-29</span></div><div class="inline-flex items-center ml-2 not-prose"><svg viewBox="0 0 1 1" class="h-4 mx-1"><use href="#series"/></svg><a href=https://blog.io01.xyz/series/%E9%98%BF%E9%87%8C%E8%A7%84%E7%BA%A6/ class=text-gray-500>é˜¿é‡Œè§„çº¦</a></div><div class="inline-flex items-center ml-2 not-prose"><svg viewBox="0 0 1 1" class="h-4 mx-1"><use href="#tags"/></svg><a href=https://blog.io01.xyz/tags/java/ class="text-gray-500 mr-1">Java</a></div></div></div></header><h2 id=å‰è¨€>å‰è¨€</h2><p><code>int</code>ã€<code>long</code> ç­‰åŸºæœ¬æ•°æ®ç±»å‹å€¼æ¯”è¾ƒå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>==</code> æ¯”è¾ƒï¼Œå…¶åŒ…è£…ç±»å‹ï¼š<code>Integer</code>ã€<code>Long</code> å¦‚æœç›´æ¥ä½¿ç”¨ <code>==</code> æ¯”è¾ƒå¤§å°æˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªç¥å¥‡çš„ç°è±¡ã€‚å½“ç„¶ï¼Œé˜¿é‡Œè§„çº¦ä¹Ÿå¯¹æ­¤åšå‡ºå¼ºåˆ¶è§„å®šï¼š</p><blockquote><p><strong>ã€å¼ºåˆ¶ã€‘</strong> æ‰€æœ‰çš„ç›¸åŒç±»å‹çš„åŒ…è£…ç±»å¯¹è±¡ä¹‹é—´å€¼çš„æ¯”è¾ƒï¼Œå…¨éƒ¨ä½¿ç”¨ <code>equals</code> æ–¹æ³•æ¯”è¾ƒã€‚</p></blockquote><h2 id=ç°è±¡>ç°è±¡</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>Integer integer1 <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>3</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Integer integer2 <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>3</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#ff79c6>if</span> <span style=color:#ff79c6>(</span>integer1 <span style=color:#ff79c6>==</span> integer2<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;integer1 == integer2&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#ff79c6>else</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;integer1 != integer2&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>Integer integer3 <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>300</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>Integer integer4 <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>300</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ff79c6>if</span> <span style=color:#ff79c6>(</span>integer3 <span style=color:#ff79c6>==</span> integer4<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;integer3 == integer4&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#ff79c6>else</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;integer3 != integer4&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>Integer integer5 <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Integer<span style=color:#ff79c6>(</span><span style=color:#bd93f9>3</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>Integer integer6 <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Integer<span style=color:#ff79c6>(</span><span style=color:#bd93f9>3</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#ff79c6>if</span> <span style=color:#ff79c6>(</span>integer5 <span style=color:#ff79c6>==</span> integer6<span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>    System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;integer5 == integer6&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#ff79c6>else</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>    System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;integer5 != integer6&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#6272a4>// è¾“å‡ºç»“æœï¼š
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#6272a4>// integer1 == integer2
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#6272a4>// integer3 != integer4
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#6272a4>// integer5 != integer6
</span></span></span></code></pre></div><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆç¥å¥‡çš„ç»“æœï¼Œç‰¹åˆ«æ˜¯å¯¹äºç¬¬ä¸€äºŒç»„å¯¹ç…§ï¼Œå‡ ä¹ç›¸åŒçš„ä»£ç ï¼Œåªæ˜¯å€¼çš„å˜åŒ–å´æœ‰ä¸åŒçš„ç»“æœã€‚</p><h2 id=åŸå› >åŸå› </h2><p>å¯¹äºç¬¬ä¸€äºŒç»„çš„å†™æ³•ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è£…ç®±ï¼Œå³è°ƒç”¨ <code>valueOf</code> æ–¹æ³•ã€‚ç†æ‰€åº”å½“æˆ‘ä»¬è¦çœ‹çœ‹ <code>valueOf</code> ä»£ç æœ‰ä»€ä¹ˆç§˜å¯†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>static</span> Integer <span style=color:#50fa7b>valueOf</span><span style=color:#ff79c6>(</span><span style=color:#8be9fd>int</span> i<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#ff79c6>if</span> <span style=color:#ff79c6>(</span>i <span style=color:#ff79c6>&gt;=</span> IntegerCache<span style=color:#ff79c6>.</span><span style=color:#50fa7b>low</span> <span style=color:#ff79c6>&amp;&amp;</span> i <span style=color:#ff79c6>&lt;=</span> IntegerCache<span style=color:#ff79c6>.</span><span style=color:#50fa7b>high</span><span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>        <span style=color:#ff79c6>return</span> IntegerCache<span style=color:#ff79c6>.</span><span style=color:#50fa7b>cache</span><span style=color:#ff79c6>[</span>i <span style=color:#ff79c6>+</span> <span style=color:#ff79c6>(-</span>IntegerCache<span style=color:#ff79c6>.</span><span style=color:#50fa7b>low</span><span style=color:#ff79c6>)];</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>new</span> Integer<span style=color:#ff79c6>(</span>i<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#8be9fd;font-style:italic>private</span> <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#8be9fd;font-style:italic>class</span> <span style=color:#50fa7b>IntegerCache</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#8be9fd;font-style:italic>final</span> <span style=color:#8be9fd>int</span> low <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>-</span><span style=color:#bd93f9>128</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#8be9fd;font-style:italic>final</span> <span style=color:#8be9fd>int</span> high<span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#8be9fd;font-style:italic>final</span> Integer cache<span style=color:#ff79c6>[];</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>        <span style=color:#8be9fd>int</span> h <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>127</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>        String integerCacheHighPropValue <span style=color:#ff79c6>=</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>            sun<span style=color:#ff79c6>.</span><span style=color:#50fa7b>misc</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>VM</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>getSavedProperty</span><span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#34;java.lang.Integer.IntegerCache.high&#34;</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>        <span style=color:#ff79c6>if</span> <span style=color:#ff79c6>(</span>integerCacheHighPropValue <span style=color:#ff79c6>!=</span> <span style=color:#ff79c6>null</span><span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>            <span style=color:#ff79c6>try</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>                <span style=color:#8be9fd>int</span> i <span style=color:#ff79c6>=</span> parseInt<span style=color:#ff79c6>(</span>integerCacheHighPropValue<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>                i <span style=color:#ff79c6>=</span> Math<span style=color:#ff79c6>.</span><span style=color:#50fa7b>max</span><span style=color:#ff79c6>(</span>i<span style=color:#ff79c6>,</span> <span style=color:#bd93f9>127</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>                <span style=color:#6272a4>// Maximum array size is Integer.MAX_VALUE
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#6272a4></span>                h <span style=color:#ff79c6>=</span> Math<span style=color:#ff79c6>.</span><span style=color:#50fa7b>min</span><span style=color:#ff79c6>(</span>i<span style=color:#ff79c6>,</span> Integer<span style=color:#ff79c6>.</span><span style=color:#50fa7b>MAX_VALUE</span> <span style=color:#ff79c6>-</span> <span style=color:#ff79c6>(-</span>low<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>-</span><span style=color:#bd93f9>1</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>            <span style=color:#ff79c6>}</span> <span style=color:#ff79c6>catch</span><span style=color:#ff79c6>(</span> NumberFormatException nfe<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>                <span style=color:#6272a4>// If the property cannot be parsed into an int, ignore it.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>        <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>        high <span style=color:#ff79c6>=</span> h<span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>        cache <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Integer<span style=color:#ff79c6>[(</span>high <span style=color:#ff79c6>-</span> low<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>1</span><span style=color:#ff79c6>];</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>        <span style=color:#8be9fd>int</span> j <span style=color:#ff79c6>=</span> low<span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>        <span style=color:#ff79c6>for</span><span style=color:#ff79c6>(</span><span style=color:#8be9fd>int</span> k <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span><span style=color:#ff79c6>;</span> k <span style=color:#ff79c6>&lt;</span> cache<span style=color:#ff79c6>.</span><span style=color:#50fa7b>length</span><span style=color:#ff79c6>;</span> k<span style=color:#ff79c6>++)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>            cache<span style=color:#ff79c6>[</span>k<span style=color:#ff79c6>]</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> Integer<span style=color:#ff79c6>(</span>j<span style=color:#ff79c6>++);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>        <span style=color:#ff79c6>assert</span> IntegerCache<span style=color:#ff79c6>.</span><span style=color:#50fa7b>high</span> <span style=color:#ff79c6>&gt;=</span> <span style=color:#bd93f9>127</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>    <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>    <span style=color:#8be9fd;font-style:italic>private</span> <span style=color:#50fa7b>IntegerCache</span><span style=color:#ff79c6>()</span> <span style=color:#ff79c6>{}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span><span style=color:#ff79c6>}</span>
</span></span></code></pre></div><p>çœ‹åˆ°è¿™å°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆç¬¬ä¸€äºŒå¯¹ç…§ç»„çš„ç»“æœå·®å¼‚äº†ï¼šå½“åœ¨ <code>[-128,127]</code> ä¹‹é—´èµ‹å€¼æ—¶ï¼Œä¼šè¢«ç¼“å­˜åˆ° <code>IntegerCache</code> ä¸­ï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œåœ¨æ­¤ä¹‹å¤–çš„å€¼åˆ™æ˜¯æ–°ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ <code>==</code> åˆ¤æ–­è‡ªç„¶ä¸º <code>false</code>ã€‚</p><h2 id=ç»“è®º>ç»“è®º</h2><p>å®é™…é€šè¿‡è¿›ä¸€æ­¥é˜…è¯»ä»£ç å¯ä»¥å¾—çŸ¥ï¼Œæ‰€æœ‰æ•´æ•°ç±»å‹çš„åŒ…è£…ç±»éƒ½æœ‰ç±»ä¼¼çš„ç¼“å­˜æœºåˆ¶ï¼š</p><ul><li><code>Byte</code> - <code>ByteCache</code></li><li><code>Short</code> - <code>ShortCache</code></li><li><code>Long</code> - <code>LongCache</code></li><li><code>Character</code> - <code>CharacterCache</code></li></ul><p>ä¸ºäº†é¿å…è¿™ç§è¯¡å¼‚æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬éµå¾ªå¯¹è±¡çš„æ¯”è¾ƒæ–¹å¼ï¼Œå¯¹äºåŒ…è£…ç±»çš„å€¼æ¯”è¾ƒç”¨ <code>equals</code> æ–¹æ³•å³å¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>equals</code> æºç æ¥ç¡®è®¤ä¸€ä¸‹ç»“è®ºçš„æ­£ç¡®æ€§ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd>boolean</span> <span style=color:#50fa7b>equals</span><span style=color:#ff79c6>(</span>Object obj<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#ff79c6>if</span> <span style=color:#ff79c6>(</span>obj <span style=color:#ff79c6>instanceof</span> Integer<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>        <span style=color:#ff79c6>return</span> value <span style=color:#ff79c6>==</span> <span style=color:#ff79c6>((</span>Integer<span style=color:#ff79c6>)</span>obj<span style=color:#ff79c6>).</span><span style=color:#50fa7b>intValue</span><span style=color:#ff79c6>();</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>false</span><span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>intValue</span><span style=color:#ff79c6>()</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#ff79c6>return</span> value<span style=color:#ff79c6>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ff79c6>}</span>
</span></span></code></pre></div><p>å¯è§ <code>equals</code> æ˜¯é€šè¿‡è°ƒç”¨ <code>intValue</code> æ‹†ç®±å¾—åˆ°åŸºæœ¬æ•°æ®ç±»å‹ç„¶åæ¯”è¾ƒçš„ï¼Œå¯ä»¥ä¿è¯å€¼æ¯”è¾ƒçš„æ­£ç¡®æ€§ã€‚</p><p>å½“ç„¶é™¤äº†é˜¿é‡Œè§„çº¦æ¨èçš„ <code>equals</code> ä»¥å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŒ…è£…ç±»å‹çš„æ¯”è¾ƒå¤§å°æ–¹æ³• <code>compareTo</code> å»æ¯”è¾ƒï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>compareTo</span><span style=color:#ff79c6>(</span>Integer anotherInteger<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#ff79c6>return</span> compare<span style=color:#ff79c6>(</span><span style=color:#ff79c6>this</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>value</span><span style=color:#ff79c6>,</span> anotherInteger<span style=color:#ff79c6>.</span><span style=color:#50fa7b>value</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>compare</span><span style=color:#ff79c6>(</span><span style=color:#8be9fd>int</span> x<span style=color:#ff79c6>,</span> <span style=color:#8be9fd>int</span> y<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>(</span>x <span style=color:#ff79c6>&lt;</span> y<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>?</span> <span style=color:#ff79c6>-</span><span style=color:#bd93f9>1</span> <span style=color:#ff79c6>:</span> <span style=color:#ff79c6>((</span>x <span style=color:#ff79c6>==</span> y<span style=color:#ff79c6>)</span> <span style=color:#ff79c6>?</span> <span style=color:#bd93f9>0</span> <span style=color:#ff79c6>:</span> <span style=color:#bd93f9>1</span><span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#ff79c6>}</span>
</span></span></code></pre></div><p><code>compareTo</code> ç›´æ¥å–å€¼è¿›è¡Œä¸¤è€…æ¯”è¾ƒï¼Œæ ¹æ®å¤§å°åˆ†åˆ«è¿”å› -1ã€0 å’Œ 1ã€‚</p><div class="flex flex-row justify-between"><div class=not-prose><a class="inline-flex items-center group text-gray-400 hover:text-sky-400" href=https://blog.io01.xyz/posts/33dn/><svg viewBox="0 0 1 1" class="fill-gray-400 group-hover:fill-sky-400 h-4 mx-1"><use href="#angle-left"/></svg>MD5 è®¡ç®—å‰å¯¼ 0 ä¸¢å¤±é—®é¢˜</a></div><div class=not-prose><a class="inline-flex items-center group text-gray-400 hover:text-sky-400" href=https://blog.io01.xyz/posts/27fg/>æœ‰è¶£çš„ç®—æ³• - å¸ƒéš†è¿‡æ»¤å™¨<svg viewBox="0 0 1 1" class="fill-gray-400 group-hover:fill-sky-400 h-4 mx-1"><use href="#angle-right"/></svg></a></div></div></article><aside class="fixed md:left-5/6 xl:left-3/4 hidden md:block top-16 w-1/6 max-h-screen p-4 shadow-md"><nav id=TableOfContents><ul><li><a href=#å‰è¨€>å‰è¨€</a></li><li><a href=#ç°è±¡>ç°è±¡</a></li><li><a href=#åŸå› >åŸå› </a></li><li><a href=#ç»“è®º>ç»“è®º</a></li></ul></nav></aside></div></div><footer><div class="flex justify-center mt-6 mb-2 text-gray-500"><span>&copy;2023
<span class=ml-2><a class=hover:text-sky-400 href=https://blog.io01.xyz>IO01</a></span></span>
<span class=mx-2>|</span>
<span>Powered by
<a class=hover:text-sky-400 href=https://gohugo.io>Hugo</a></span>
<span class=mx-1>&</span>
<span><a class=hover:text-sky-400 href=#>FullMoon</a></span></div></footer></body></html>